{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - The Gupta Hotel</title>
    <link rel="shortcut icon" href="/static/css/logo.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
    
    <script type="module">
        import { createIcons, Phone, Mail, MapPin, Clock } from 'https://cdn.skypack.dev/lucide@0.320.0';
        // We will call createIcons in the main script block on load
    </script>

    <style>
      /* Custom styles to match the original React/Tailwind/Motion theme */
      :root {
          scroll-behavior: smooth;
      }
      body {
        font-family: 'Inter', sans-serif;
        background-color: #fff; /* Default background */
      }
      h1, h2, h3 {
        font-family: 'Playfair Display', serif;
        font-weight: 700;
      }
      .hero-gradient {
        background: linear-gradient(135deg, #2a2a2a, #1a1a1a, #3d2817);
      }
/* 
      /* --- Animations from home --- */
      .js-animate { opacity: 0; }
      .js-from-up { transform: translateY(40px); }
      .js-from-down { transform: translateY(-40px); }
      .js-from-left { transform: translateX(-40px); }
      .js-from-right { transform: translateX(40px); }

      .js-in-view {
          transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                      opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
          opacity: 1;
          transform: translate(0, 0);
      }
      
      .js-interactive {
          transition: transform 0.3s ease-out, box-shadow 0.3s, background-color 0.3s, filter 0.3s;
      }
      
      .card-hover-transform {
           transition: transform 0.3s ease-out, box-shadow 0.3s, border-color 0.3s !important;
      }

      .js-interactive:hover { transform: scale(1.05); }
      .js-interactive:active { transform: scale(0.98); }
      
      .card-hover-transform:hover {
          transform: translateY(-8px) !important;
          filter: drop-shadow(0 10px 8px rgb(0 0 0 / 0.08)) drop-shadow(0 4px 3px rgb(0 0 0 / 0.15));
      }
       .card-hover-transform { filter: drop-shadow(0 0px 0px transparent); }
      
      .section-container { position: relative; z-index: 1; }

      .content-block-hover {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        z-index: 1; 
      }
      .content-block-hover:hover {
        transform: scale(1.02); 
        box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.2), 0 6px 8px -3px rgba(0, 0, 0, 0.1);
        z-index: 10;
      }

      .card-hover { transition: transform 0.3s ease-out, box-shadow 0.3s ease-out; }
      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
      }
       */
      .icon-hover-rotate:hover {
          transform: rotate(10deg) scale(1.1);
          transition: transform 0.3s ease-out;
      }
      .icon-container { transition: transform 0.3s ease-out; }
      
      .list-item-scale { transition: transform 0.2s ease-out; }
      .list-item-scale:hover { transform: scale(1.03); color: #1a1a1a; }

      .faq-content-wrapper { transition: height 0.3s ease-in-out, opacity 0.3s ease-in-out; }
      
      #contact-section {
        background-image: url(/static/css/back.jpg);
        background-size: cover;
        background-position: center;
      }
    </style>
  </head>
  <body>
    <div id="app" class="min-h-screen">
      
      {% include 'header.html' %}
      
      <main>
        
        <section class="hero-gradient text-white py-20 md:py-32">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center js-animate js-from-up" style="transition-delay: 0s;">
            <h1 class="text-4xl md:text-6xl font-bold mb-6 js-animate js-from-up" style="transition-delay: 0.1s;">Contact Us</h1>
            <p class="text-lg md:text-xl text-gray-200 max-w-2xl mx-auto js-animate js-from-up" style="transition-delay: 0.2s;">We'd love to hear from you. Get in touch with us today.</p>
          </div>
        </section>

        <section class="py-20 md:py-28 bg-white section-container">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
              
              <div class="js-card-animate" style="transition-delay: 0.1s;">
                <div class="bg-gradient-to-br from-gray-50 to-white p-6 rounded-xl border border-amber-100 hover:border-amber-300 hover:shadow-lg transition-all text-center content-block-hover card-hover-transform">
                  <div class="flex justify-center mb-4 icon-container">
                      <div class="p-3 bg-amber-100 rounded-lg text-amber-600 icon-hover-rotate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-phone w-6 h-6"><path d="M13.832 16.568a1 1 0 0 0 1.213-.303l-.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384"/></svg>
                      </div>
                  </div>
                  <h3 class="text-lg font-bold text-gray-900 mb-3">Phone</h3>
                  <div class="space-y-1 mb-3">
                      <p class="text-gray-600 font-medium list-item-scale">+91 9835364361</p>
                      <p class="text-gray-600 font-medium list-item-scale">+91 7644894498</p>
                  </div>
                  <p class="text-sm text-gray-500">Available 24/7</p>
                </div>
              </div>

              <div class="js-card-animate" style="transition-delay: 0.2s;">
                <div class="bg-gradient-to-br from-gray-50 to-white p-6 rounded-xl border border-amber-100 hover:border-amber-300 hover:shadow-lg transition-all text-center content-block-hover card-hover-transform">
                  <div class="flex justify-center mb-4 icon-container">
                      <div class="p-3 bg-amber-100 rounded-lg text-amber-600 icon-hover-rotate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail w-6 h-6"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"/><rect x="2" y="4" width="20" height="16" rx="2"/></svg>
                      </div>
                  </div>
                  <h3 class="text-lg font-bold text-gray-900 mb-3">Email</h3>
                  <div class="space-y-1 mb-3">
                      <p class="text-gray-600 font-medium list-item-scale">info@guptahotel.com</p>
                      <p class="text-gray-600 font-medium list-item-scale">reservations@guptahotel.com</p>
                  </div>
                  <p class="text-sm text-gray-500">We respond within 24 hours</p>
                </div>
              </div>

              <div class="js-card-animate" style="transition-delay: 0.3s;">
                <div class="bg-gradient-to-br from-gray-50 to-white p-6 rounded-xl border border-amber-100 hover:border-amber-300 hover:shadow-lg transition-all text-center content-block-hover card-hover-transform">
                  <div class="flex justify-center mb-4 icon-container">
                      <div class="p-3 bg-amber-100 rounded-lg text-amber-600 icon-hover-rotate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin w-6 h-6"><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/></svg>
                      </div>
                  </div>
                  <h3 class="text-lg font-bold text-gray-900 mb-3">Address</h3>
                  <div class="space-y-1 mb-3">
                      <p class="text-gray-600 font-medium list-item-scale">Stila Mander, Near Sabji Mandi</p>
                      <p class="text-gray-600 font-medium list-item-scale">Jamshedpur, Sakchi, 831001</p>
                  </div>
                  <p class="text-sm text-gray-500">Jharkhand, India</p>
                </div>
              </div>

              <div class="js-card-animate" style="transition-delay: 0.4s;">
                <div class="bg-gradient-to-br from-gray-50 to-white p-6 rounded-xl border border-amber-100 hover:border-amber-300 hover:shadow-lg transition-all text-center content-block-hover card-hover-transform">
                  <div class="flex justify-center mb-4 icon-container">
                      <div class="p-3 bg-amber-100 rounded-lg text-amber-600 icon-hover-rotate">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock w-6 h-6"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="10"/></svg>
                      </div>
                  </div>
                  <h3 class="text-lg font-bold text-gray-900 mb-3">Hours</h3>
                  <div class="space-y-1 mb-3">
                      <p class="text-gray-600 font-medium list-item-scale">Mon - Sun</p>
                      <p class="text-gray-600 font-medium list-item-scale">24 Hours</p>
                  </div>
                  <p class="text-sm text-gray-500">We're always here for you</p>
                </div>
              </div>

            </div>
          </div>
        </section>

        <section class="py-20 md:py-28 bg-gray-50 section-container" id="contact-section">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
              
              <div class="js-animate js-from-left" style="transition-delay: 0s;">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">Send us a Message</h2>
                
                <form id="contactForm" class="space-y-6">
                  {% csrf_token %}
                  
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div class="js-animate js-from-up" style="transition-delay: 0.1s;">
                      <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">Full Name *</label>
                      <input type="text" id="name" name="name" required placeholder="Your Name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-600 focus:border-transparent outline-none transition">
                    </div>
                    <div class="js-animate js-from-up" style="transition-delay: 0.15s;">
                      <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                      <input type="email" id="email" name="email" required placeholder="your@email.com" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-600 focus:border-transparent outline-none transition">
                    </div>
                  </div>
                  
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                    <div class="js-animate js-from-up" style="transition-delay: 0.2s;">
                      <label for="phone" class="block text-sm font-semibold text-gray-700 mb-2">Phone Number *</label>
                      <input type="tel" id="phone" name="phone" required placeholder="+91 98765 43210" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-600 focus:border-transparent outline-none transition">
                    </div>
                    <div class="js-animate js-from-up" style="transition-delay: 0.25s;">
                      <label for="subject" class="block text-sm font-semibold text-gray-700 mb-2">Subject *</label>
                      <select id="subject" name="subject" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-600 focus:border-transparent outline-none transition bg-white">
                        <option value="">Select a subject</option>
                        <option value="Booking Inquiry">Booking Inquiry</option>
                        <option value="General Question">General Question</option>
                        <option value="Feedback">Feedback</option>
                        <option value="Special Request">Special Request</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                  </div>

                  <div class="js-animate js-from-up" style="transition-delay: 0.3s;">
                    <label for="message" class="block text-sm font-semibold text-gray-700 mb-2">Message *</label>
                    <textarea id="message" name="message" required placeholder="Tell us about your inquiry..." rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-600 focus:border-transparent outline-none transition resize-none"></textarea>
                  </div>
                  
                  <div class="pt-2 js-animate js-from-up" style="transition-delay: 0.35s;">
                    <button type="submit" id="submitBtn" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-4 rounded-lg transition-colors text-lg card-hover js-interactive">
                      Send Message
                    </button>
                    <div id="successMessage" class="hidden mt-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg">
                        <p class="font-semibold">Thank you for reaching out! Your message has been saved successfully.</p>
                    </div>
                    <div id="errorMessage" class="hidden mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
                        <p class="font-semibold">Something went wrong. Please try again.</p>
                    </div>
                  </div>
                </form>
              </div>

              <div class="js-animate js-from-right" style="transition-delay: 0s;">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">Visit Us</h2>
                
                <div class="bg-white rounded-xl overflow-hidden shadow-lg mb-8 content-block-hover js-animate js-from-up" style="transition-delay: 0.1s;">
                  <iframe 
                    width="100%" 
                    height="400" 
                    src="https://maps.google.com/maps?q=Stila+Mander,+Sakchi,+Jamshedpur&t=&z=15&ie=UTF8&iwloc=&output=embed" 
                    style="border:0;" 
                    allowfullscreen 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                  </iframe>
                </div>

                <div class="bg-gradient-to-br from-amber-50 to-white p-8 rounded-xl border border-amber-100 content-block-hover card-hover-transform js-animate js-from-up" style="transition-delay: 0.2s;">
                  <h3 class="text-xl font-bold text-gray-900 mb-4">Why Choose Us?</h3>
                  <ul class="space-y-3 text-gray-600">
                    <li class="flex items-start gap-3 list-item-scale">
                        <span class="text-amber-600 font-bold mt-1 flex-shrink-0">✓</span>
                        Expert team ready to assist you 24/7
                    </li>
                    <li class="flex items-start gap-3 list-item-scale">
                        <span class="text-amber-600 font-bold mt-1 flex-shrink-0">✓</span>
                        Quick response to all inquiries
                    </li>
                    <li class="flex items-start gap-3 list-item-scale">
                        <span class="text-amber-600 font-bold mt-1 flex-shrink-0">✓</span>
                        Personalized service and attention
                    </li>
                    <li class="flex items-start gap-3 list-item-scale">
                        <span class="text-amber-600 font-bold mt-1 flex-shrink-0">✓</span>
                        Prime location in Jamshedpur
                    </li>
                    <li class="flex items-start gap-3 list-item-scale">
                        <span class="text-amber-600 font-bold mt-1 flex-shrink-0">✓</span>
                        State-of-the-art facilities
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="max-w-4xl mx-auto mt-20 md:mt-32">
                <div class="js-animate js-from-up" style="transition-delay: 0s;">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-12 text-center">Frequently Asked Questions</h2>
                </div>
                <div class="space-y-4">
                  <div class="js-animate js-from-up" style="transition-delay: 0.1s;">
                    <details class="group border border-amber-100 rounded-lg overflow-hidden hover:border-amber-300 transition-colors content-block-hover">
                        <summary class="flex cursor-pointer items-center justify-between bg-gray-50 px-6 py-4 font-semibold text-gray-900 hover:bg-amber-50 transition-colors">
                            What is the check-in and check-out time?
                            <span class="transition-transform group-open:rotate-180">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>
                            </span>
                        </summary>
                        <div data-content-wrapper class="faq-content-wrapper overflow-hidden" style="height: 0; opacity: 0;">
                          <div class="bg-white px-6 py-4 text-gray-600 border-t border-amber-100" data-content>
                              Standard check-in is at 2:00 PM and check-out is at 11:00 AM. Early check-in and late check-out may be available upon request.
                          </div>
                        </div>
                    </details>
                  </div>

                  <div class="js-animate js-from-up" style="transition-delay: 0.2s;">
                    <details class="group border border-amber-100 rounded-lg overflow-hidden hover:border-amber-300 transition-colors content-block-hover">
                        <summary class="flex cursor-pointer items-center justify-between bg-gray-50 px-6 py-4 font-semibold text-gray-900 hover:bg-amber-50 transition-colors">
                            Do you have parking facilities?
                            <span class="transition-transform group-open:rotate-180">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>
                            </span>
                        </summary>
                        <div data-content-wrapper class="faq-content-wrapper overflow-hidden" style="height: 0; opacity: 0;">
                          <div class="bg-white px-6 py-4 text-gray-600 border-t border-amber-100" data-content>
                              Yes, we provide complimentary parking for our guests. Both covered and open parking options are available.
                          </div>
                        </div>
                    </details>
                  </div>

                  <div class="js-animate js-from-up" style="transition-delay: 0.3s;">
                    <details class="group border border-amber-100 rounded-lg overflow-hidden hover:border-amber-300 transition-colors content-block-hover">
                        <summary class="flex cursor-pointer items-center justify-between bg-gray-50 px-6 py-4 font-semibold text-gray-900 hover:bg-amber-50 transition-colors">
                            Is there a cancellation policy?
                            <span class="transition-transform group-open:rotate-180">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>
                            </span>
                        </summary>
                        <div data-content-wrapper class="faq-content-wrapper overflow-hidden" style="height: 0; opacity: 0;">
                          <div class="bg-white px-6 py-4 text-gray-600 border-t border-amber-100" data-content>
                              Yes, cancellations made 48 hours before check-in are eligible for a full refund. Please contact us for more details.
                          </div>
                        </div>
                    </details>
                  </div>
                  
                  <div class="js-animate js-from-up" style="transition-delay: 0.4s;">
                    <details class="group border border-amber-100 rounded-lg overflow-hidden hover:border-amber-300 transition-colors content-block-hover">
                        <summary class="flex cursor-pointer items-center justify-between bg-gray-50 px-6 py-4 font-semibold text-gray-900 hover:bg-amber-50 transition-colors">
                            Do you offer airport pickup?
                            <span class="transition-transform group-open:rotate-180">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>
                            </span>
                        </summary>
                        <div data-content-wrapper class="faq-content-wrapper overflow-hidden" style="height: 0; opacity: 0;">
                          <div class="bg-white px-6 py-4 text-gray-600 border-t border-amber-100" data-content>
                              Yes, we can arrange airport pickup and transportation services for a fee. Please mention this request when making your reservation or contact us directly.
                          </div>
                        </div>
                    </details>
                  </div>

                </div>
            </div>

          </div>
        </section>

      </main>
      
      <div id="footer-placeholder"></div>
      
    </div>
    
    <script>
        // --- Scroll Animation Logic ---
        function setupIntersectionObserver() {
            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -50px 0px',
                threshold: 0.1 
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    const target = entry.target;
                    if (entry.isIntersecting) {
                        const delay = parseFloat(target.style.transitionDelay || 0) * 1000;
                        setTimeout(() => {
                            target.classList.add('js-in-view'); 
                        }, delay);
                        observer.unobserve(target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.js-animate').forEach(el => observer.observe(el));
            document.querySelectorAll('.js-card-animate').forEach(el => {
                el.classList.add('js-animate', 'js-from-up'); 
                observer.observe(el);
            });
        }
        window.onload = setupIntersectionObserver;


        // --- Contact Form Logic (UPDATED to save to database) ---
        document.addEventListener('DOMContentLoaded', () => {
            
            const form = document.getElementById('contactForm');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const submitBtn = document.getElementById('submitBtn');
            
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Show Loading State
                    submitBtn.innerText = "Sending...";
                    submitBtn.disabled = true;
                    successMessage.classList.add('hidden');
                    errorMessage.classList.add('hidden');

                    const formData = new FormData(form);

                    // Send Data to Django View using Fetch
                    fetch("{% url 'contact_submit' %}", {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'X-Requested-With': 'XMLHttpRequest'
                        }
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            successMessage.classList.remove('hidden');
                            form.reset();
                        } else {
                            errorMessage.classList.remove('hidden');
                            console.error('Submission Error:', data.message);
                        }
                    })
                    .catch(error => {
                        errorMessage.classList.remove('hidden');
                        console.error('Network Error:', error);
                    })
                    .finally(() => {
                        // Reset Button
                        submitBtn.innerText = "Send Message";
                        submitBtn.disabled = false;
                        
                        // Hide success message after 5 seconds
                        setTimeout(() => {
                            successMessage.classList.add('hidden');
                            errorMessage.classList.add('hidden');
                        }, 5000);
                    });
                });
            }

            // --- FAQ Accordion Logic ---
            document.querySelectorAll('details').forEach(details => {
                const contentWrapper = details.querySelector('[data-content-wrapper]');
                if (!contentWrapper) return;

                if (!details.open) {
                    contentWrapper.style.height = '0px';
                    contentWrapper.style.opacity = '0';
                    contentWrapper.setAttribute('aria-hidden', 'true');
                }

                details.addEventListener('toggle', () => {
                    const content = contentWrapper.querySelector('[data-content]');
                    if (!content) return;

                    if (details.open) {
                        contentWrapper.style.height = 'auto';
                        const height = content.offsetHeight;
                        contentWrapper.style.height = '0px';
                        void contentWrapper.offsetHeight; 
                        
                        requestAnimationFrame(() => {
                            contentWrapper.style.height = `${height}px`;
                            contentWrapper.style.opacity = '1';
                            contentWrapper.setAttribute('aria-hidden', 'false');
                        });
                        
                        contentWrapper.ontransitionend = () => {
                            if (details.open) contentWrapper.style.height = 'auto';
                            contentWrapper.ontransitionend = null;
                        };

                    } else {
                        contentWrapper.style.height = `${content.offsetHeight}px`;
                        contentWrapper.style.opacity = '1';
                        contentWrapper.setAttribute('aria-hidden', 'false');
                        
                        requestAnimationFrame(() => {
                            contentWrapper.style.height = '0px';
                            contentWrapper.style.opacity = '0';
                            contentWrapper.setAttribute('aria-hidden', 'true');
                        });
                        
                        contentWrapper.ontransitionend = () => {
                            contentWrapper.style.height = '0px';
                            contentWrapper.ontransitionend = null;
                        };
                    }
                });
            });

            // 3. Create Icons
            setTimeout(() => {
                if (typeof createIcons === 'function') {
                    createIcons({ icons: { Phone, Mail, MapPin, Clock } });
                }
            }, 0);
        });

    </script>

    <script src="{% static 'css/layout.js' %}" defer></script>
  </body>
</html>